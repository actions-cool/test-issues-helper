name: Issue Open

on:
  issues:
    types: [opened, reopened, edited]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - if: github.actor == github.event.issue.user.login
        run: echo 'same'
      - if: github.actor != github.event.issue.user.login
        run: echo 'no same'
  check-helper:
    runs-on: ubuntu-latest
    if: contains(github.event.issue.body, 'ant-design-issue-helper') == false
    steps:
      - name: test
        uses: actions-cool/issues-helper@up
        with:
          actions: 'create-comment,add-labels,/close-issue'
          token: ${{ secrets.GITHUB_TOKEN }}
          issue-number: ${{ github.event.issue.number }}
          labels: 'Invalid'
          body: |
            Hello @${{ github.event.issue.user.login }}, your issue has been closed because it does not conform to our issue requirements. Please use the [Issue Helper](http://new-issue.ant.design) to create an issue, thank you!

            ä½ å¥½ @${{ github.event.issue.user.login }}ï¼Œä¸ºäº†èƒ½å¤Ÿè¿›è¡Œé«˜æ•ˆæ²Ÿé€šï¼Œæˆ‘ä»¬å¯¹ issue æœ‰ä¸€å®šçš„æ ¼å¼è¦æ±‚ï¼Œä½ çš„ issue å› ä¸ºä¸ç¬¦åˆè¦æ±‚è€Œè¢«è‡ªåŠ¨å…³é—­ã€‚ä½ å¯ä»¥é€šè¿‡ [issue åŠ©æ‰‹](http://new-issue.ant.design) æ¥åˆ›å»º issue ä»¥æ–¹ä¾¿æˆ‘ä»¬å®šä½é”™è¯¯ã€‚è°¢è°¢é…åˆï¼

  test-u1:
    runs-on: ubuntu-latest
    if: github.event.issue.state == 'open' && contains(github.event.issue.body, 'https://github.com') == false && contains(github.event.issue.body, 'https://stackblitz.com') == false
    steps:
      - uses: actions-cool/maintain-one-comment@main
        with:
          body: ç”±äºç¼ºä¹è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æš‚æ—¶å…³é—­äº†è¯¥ Issueã€‚è¯·æä¾› æœ€å°é‡ç° ä»¥é‡æ–°å¼€å¯ Issueã€‚è°¢è°¢ã€‚
      - uses: actions-cool/issues-helper@main
        with:
          actions: close-issue
  
  test-u2:
    runs-on: ubuntu-latest
    if: github.event.issue.state == 'close' && contains(github.event.issue.body, 'https://github.com') == true || contains(github.event.issue.body, 'https://stackblitz.com') == true
    steps:
      - uses: actions-cool/maintain-one-comment@main
          
      - uses: actions-cool/issues-helper@main
        with:
          actions: open-issue
  
  check-issue:
    runs-on: ubuntu-latest
    steps:
      - uses: actions-cool/issues-helper@up
        id: check
        with:
          actions: 'check-issue'
          issue-number: ${{ github.event.issue.number }}
          title-excludes: 'ğŸ›[BUG], ğŸ‘‘ [éœ€æ±‚]'
  
      - run: echo check ${{ steps.check.outputs.check-result }}
      
      - if: steps.check.outputs.check-result == 'false'
        uses: actions-cool/issues-helper@up
        with:
          actions: 'close-issue'
          issue-number: ${{ github.event.issue.number }}
      
      - if: steps.check.outputs.check-result == 'true'
        uses: actions-cool/issues-similarity-analysis@main
        with:
          filter-threshold: 0.5
          title-excludes: 'ğŸ›[BUG], ğŸ‘‘ [éœ€æ±‚]'
          comment-title: '### See'
          comment-body: '${index}. ${similarity} #${number}'
      
      - if: github.event.action == 'opened'
        run: echo "opened1"
        
      - if: github.event.action == 'edited'
        run: echo "edited2"
